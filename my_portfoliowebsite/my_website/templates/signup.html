{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sign Up - Sandip Portfolio</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="icon" href="{% static 'favicon.svg' %}">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">

<!-- Toastify -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
<script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

<style>
* { margin:0; padding:0; box-sizing:border-box; }
html,body{
  width:100%;
  height:100%;
  font-family:'Poppins',sans-serif;
  overflow:hidden;
  background:black;
}

/* VIDEO BACKGROUND */
.video-bg video{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:0;
}

/* RIPPLE CANVAS */
#rippleCanvas{
  position:fixed;
  inset:0;
  z-index:1;
  pointer-events:none;
}

/* BRAND */
.auth-brand{
  position:fixed;
  top:18px;
  left:18px;
  z-index:3;
  display:flex;
  align-items:center;
  gap:10px;
  color:white;
  font-weight:800;
}
.auth-badge{
  width:34px;height:34px;
  border-radius:50%;
  display:grid;
  place-items:center;
  background:linear-gradient(135deg,#6366f1,#8b5cf6);
}

/* FORM */
.auth-container{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  z-index:2;
  width:420px;
  background:rgba(255,255,255,0.96);
  border-radius:18px;
  padding:40px 32px;
  text-align:center;
  box-shadow:0 20px 50px rgba(0,0,0,.25);
}

.auth-container h2{
  font-weight:800;
  margin-bottom:6px;
}
.subtitle{
  font-size:.95rem;
  color:#6b7280;
  margin-bottom:14px;
}

.input-group{
  position:relative;
  margin-top:14px;
}
.input-group input{
  width:100%;
  padding:14px 44px;
  border-radius:12px;
  border:1.5px solid #e5e7eb;
  font-size:15px;
}
.input-icon{
  position:absolute;
  left:14px;
  top:50%;
  transform:translateY(-50%);
}
.toggle-password{
  position:absolute;
  right:12px;
  top:50%;
  transform:translateY(-50%);
  background:none;
  border:none;
  cursor:pointer;
}

button[type="submit"]{
  width:100%;
  margin-top:16px;
  padding:14px;
  border:none;
  border-radius:12px;
  background:linear-gradient(135deg,#6366f1,#8b5cf6);
  color:white;
  font-weight:800;
  font-size:16px;
  cursor:pointer;
}

.switch-link{
  margin-top:18px;
  font-size:14px;
}
.switch-link a{
  color:#4a00e0;
  font-weight:600;
  text-decoration:none;
}

@media(max-width:500px){
  .auth-container{ width:92%; }
}
</style>
</head>
<body>

<!-- BRAND -->
<div class="auth-brand">
  <div class="auth-badge">S</div>
  <span>Sandip Patel</span>
</div>

<!-- VIDEO -->
<div class="video-bg">
  <video autoplay muted loop playsinline>
    <source src="{% static 'real-water-video.mp4' %}" type="video/mp4">
  </video>
</div>

<!-- RIPPLE -->
<canvas id="rippleCanvas"></canvas>

<!-- FORM -->
<div class="auth-container">
  <h2>Create your account</h2>
  <p class="subtitle">Join Sandip Patel's platform</p>

  <form method="post">
    {% csrf_token %}

    <div class="input-group">
      <span class="input-icon">üìß</span>
      <input type="email" name="email" placeholder="Email" required>
    </div>

    <div class="input-group">
      <span class="input-icon">üîí</span>
      <input id="p1" type="password" name="password1" placeholder="Password" required>
      <button type="button" class="toggle-password" onclick="toggle(p1,this)">üëÅÔ∏è</button>
    </div>

    <div class="input-group">
      <span class="input-icon">üîí</span>
      <input id="p2" type="password" name="password2" placeholder="Confirm Password" required>
      <button type="button" class="toggle-password" onclick="toggle(p2,this)">üëÅÔ∏è</button>
    </div>

    <button type="submit">Sign Up</button>
    <p class="switch-link">Already have an account?
      <a href="{% url 'login' %}">Login</a>
    </p>
  </form>
</div>

{% if messages %}
<script>
{% for message in messages %}
Toastify({
  text:"{{ message }}",
  duration:4000,
  gravity:"top",
  position:"center",
  backgroundColor:"linear-gradient(to right,#8b5cf6,#6366f1)"
}).showToast();
{% endfor %}
</script>
{% endif %}

<!-- PASSWORD TOGGLE -->
<script>
function toggle(input,btn){
  const show=input.type==="text";
  input.type=show?"password":"text";
  btn.textContent=show?"üëÅÔ∏è":"üôà";
}
</script>

<!-- WATER RIPPLE SCRIPT -->
<script>
const canvas=document.getElementById("rippleCanvas");
const ctx=canvas.getContext("2d");
let ripples=[];

function resize(){
  canvas.width=innerWidth;
  canvas.height=innerHeight;
}
resize(); addEventListener("resize",resize);

function ripple(x,y){
  ripples.push({x,y,r:2,a:0.35});
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for(let i=ripples.length-1;i>=0;i--){
    let p=ripples[i];
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.strokeStyle=`rgba(255,255,255,${p.a})`;
    ctx.lineWidth=1.2;
    ctx.stroke();
    p.r+=1.6;
    p.a-=0.006;
    if(p.a<=0) ripples.splice(i,1);
  }
  requestAnimationFrame(draw);
}
draw();

addEventListener("mousemove",e=>{
  if(Math.random()>0.93) ripple(e.clientX,e.clientY);
});
addEventListener("click",e=>{
  for(let i=0;i<3;i++)
    setTimeout(()=>ripple(e.clientX,e.clientY),i*120);
});
</script>

</body>
</html>
